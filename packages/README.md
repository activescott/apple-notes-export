Below is a brief description of the npm packages in this repo. The main app is `apple-notes-export-app` the other packages are just supporting the main app, but might be interested if you're writing TypeScript or JavaScript in the AppleScript/Open Scripting Architecture environment (i.e. osascript).

- [/packages/apple-notes-export-app](tree/master/packages/apple-notes-export-app): This is the actual application to run to export notes. It depends on the packages below to get it's job done. It consists of a simple [executable cli](blob/master/packages/apple-notes-export-app/src/cli.ts) that runs in node to launch the rest of the bundled app inside of the `osascript` environment.
- [/packages/apple-jsx-env](tree/master/packages/apple-jsx-env): This package contains only [TypeScript declaration files](https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html) for the set of global types when running TypeScript/JavaScript in the AppleScript environment (`osascript`). osascript is kinda like node.js but but entirely different set globals & libraries. It also contains definitions for a few of the Objective-C/macOS frameworks such as [Foundation](https://developer.apple.com/documentation/foundation?language=objc) and [dispatch](https://developer.apple.com/documentation/dispatch).
- [/packages/apple-jsx](tree/master/packages/apple-jsx): Extends `/packages/apple-jsx-env` with an implementation of a few common abstractions that you'll miss from node.js in this environment. Such as file system operations, getting process args, and some super basic threading operations because the environment is weird and you'll need them to do even simple things like [wait on a promise without the process just shutting down](https://github.com/activescott/apple-notes-export/blob/3468f779288467b99a1bfa25bb5d70803303b331/packages/apple-notes-export-app/src/index.ts#L138).
- [/packages/apple-jsx-apps](tree/master/packages/apple-jsx-apps): Extends `/packages/apple-jsx-env` with an implementation that wraps up [the Apple Notes Application's Scripting Dictionary](http://www.macosxautomation.com/applescript/notes/index.html) (i.e. the application's SDK/Objects exposed to AppleScript). This package would be a good place to put types for other applications in the future.
- [/packages/apple-jsx-testing](tree/master/packages/apple-jsx-testing): This is some very lightweight unit tests on some of the packages above. It explicitly runs in the `osascript` environment so it's got a really [crude unit testing framework](blob/master/packages/apple-jsx-testing/src/zoot.ts) built in since getting jest or mocha working in that environment seemed like a fool's errand (I didn't even try).

**Why multiple packages?** It was difficult to get TypeScript to play nicely with a library that exported implementation files (\*.ts) as well as declaration files (\*.d.ts) in a single package. It would mangle the various triple-slash directives from `/// <reference path=...` to `/// <reference types=...` where the types value was meaningless to the consuming package without special tsconfig changes.
